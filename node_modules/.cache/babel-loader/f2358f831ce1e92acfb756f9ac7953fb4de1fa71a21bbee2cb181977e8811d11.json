{"ast":null,"code":"import Web3 from 'web3';\nimport compiledContract from '../contract/ptTrans.json';\nconst deploy = async mymessage => {\n  try {\n    // 建立 Web3 連接\n    const web3 = new Web3(window.ethereum);\n\n    // 取得帳戶\n    const accounts = await web3.eth.requestAccounts();\n\n    /**\r\n     * 部署合約需要使用合約介面和合約的 bytecode\r\n     * 我們從編譯的智能合約中獲取這兩個資訊\r\n     * 編譯後的智能合約以 JSON 格式保存在 contract 資料夾中\r\n     */\n    const result = await new web3.eth.Contract(compiledContract.abi).deploy({\n      data: \"0x\" + compiledContract.data.bytecode.object,\n      arguments: [mymessage]\n    }).send({\n      gas: 3000000,\n      from: accounts[0]\n    });\n    console.log(`合約已部署至地址：${result.options.address}`);\n\n    // 其他邏輯...\n  } catch (error) {\n    console.error(error);\n    return error;\n  }\n};\nexport default deploy;","map":{"version":3,"names":["Web3","compiledContract","deploy","mymessage","web3","window","ethereum","accounts","eth","requestAccounts","result","Contract","abi","data","bytecode","object","arguments","send","gas","from","console","log","options","address","error"],"sources":["C:/Users/wwwna/Desktop/test/src/ethereum/deploy.js"],"sourcesContent":["import Web3 from 'web3';\r\nimport compiledContract from '../contract/ptTrans.json';\r\n\r\nconst deploy = async (mymessage) => {\r\n  try {\r\n    // 建立 Web3 連接\r\n    const web3 = new Web3(window.ethereum);\r\n\r\n    // 取得帳戶\r\n    const accounts = await web3.eth.requestAccounts();\r\n\r\n    /**\r\n     * 部署合約需要使用合約介面和合約的 bytecode\r\n     * 我們從編譯的智能合約中獲取這兩個資訊\r\n     * 編譯後的智能合約以 JSON 格式保存在 contract 資料夾中\r\n     */\r\n    const result = await new web3.eth.Contract(\r\n      compiledContract.abi\r\n    )\r\n      .deploy({ data: \"0x\" + compiledContract.data.bytecode.object, arguments: [mymessage] })\r\n      .send({ gas: 3000000, from: accounts[0] });\r\n    console.log(`合約已部署至地址：${result.options.address}`);\r\n\r\n    // 其他邏輯...\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n    return error;\r\n  }\r\n};\r\n\r\nexport default deploy;\r\n\r\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,gBAAgB,MAAM,0BAA0B;AAEvD,MAAMC,MAAM,GAAG,MAAOC,SAAS,IAAK;EAClC,IAAI;IACF;IACA,MAAMC,IAAI,GAAG,IAAIJ,IAAI,CAACK,MAAM,CAACC,QAAQ,CAAC;;IAEtC;IACA,MAAMC,QAAQ,GAAG,MAAMH,IAAI,CAACI,GAAG,CAACC,eAAe,CAAC,CAAC;;IAEjD;AACJ;AACA;AACA;AACA;IACI,MAAMC,MAAM,GAAG,MAAM,IAAIN,IAAI,CAACI,GAAG,CAACG,QAAQ,CACxCV,gBAAgB,CAACW,GACnB,CAAC,CACEV,MAAM,CAAC;MAAEW,IAAI,EAAE,IAAI,GAAGZ,gBAAgB,CAACY,IAAI,CAACC,QAAQ,CAACC,MAAM;MAAEC,SAAS,EAAE,CAACb,SAAS;IAAE,CAAC,CAAC,CACtFc,IAAI,CAAC;MAAEC,GAAG,EAAE,OAAO;MAAEC,IAAI,EAAEZ,QAAQ,CAAC,CAAC;IAAE,CAAC,CAAC;IAC5Ca,OAAO,CAACC,GAAG,CAAE,YAAWX,MAAM,CAACY,OAAO,CAACC,OAAQ,EAAC,CAAC;;IAEjD;EAEF,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdJ,OAAO,CAACI,KAAK,CAACA,KAAK,CAAC;IACpB,OAAOA,KAAK;EACd;AACF,CAAC;AAED,eAAetB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}